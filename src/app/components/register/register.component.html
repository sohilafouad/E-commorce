<section class="bg-main-light shadow p-2 my-2 rounded-4">
    <h1 class="h2 text-main">Register Now:</h1>
    <form [formGroup]="registerForm" (ngSubmit)="registerSubmit()" >

        <div class="my-2">
            <label for="name">Name</label>
            <input [ngClass]="{
                'is-valid': !registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty) ,
                'is-invalid': registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty) 
            }"      id="name" type="text" class="form-control" formControlName="name" >
            <!-- hena h3ml validation  for user ---// using if 34an heya ele ms2ola 3n show or hide data based on condition// a7na 3uzen nwsl l name in registform f hya 3ndha method esmha get //
             registerForm.get('name')?.errors //de m3naha en b2olo ro7 hat elname ? de null safty afrd name m4 mogda asln yb2a null w eldiv m4 hyzhr tab hya el name mogoda ro7 hat el errors//bs brdo kda awl ma nft6 elproject hnal2e msg el erorr
             l2n el name required f bnzod el condition da registerForm.get('name')?.touched kda el msg error m4 htzhr ela ama alms el input// dirty m3naha en ktbt gwa el input
             -->
@if(registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty)){
    <div class="alert alert-danger w-50">
        @if(registerForm.get('name')?.getError('required')){
            <p class="m-0">Name Is required</p>
        }
     @else if (registerForm.get('name')?.getError('minlength')) { <p class="m-0">Name Should be more than or equal  3 chars</p>}
     @else if (registerForm.get('name')?.getError('maxlength')) {  <p class="m-0">Name Should be less than or equal  20 chars</p>}
      
                    </div>
}
        </div>
        <div class="my-2">
            <label for="email">Email</label>
            <input [ngClass]="{
                'is-valid': !registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty) ,
                'is-invalid': registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty) }"



            id="email" type="email" class="form-control" formControlName="email">
     @if(registerForm.get('email')?.errors && (registerForm.get('email')?.touched||registerForm.get('email')?.dirty)){
        <div class="alert alert-danger w-50">
            @if(registerForm.get('email')?.getError('required')){   <p class="m-0">Email Is required</p>}
         @else if (registerForm.get('email')?.getError('email')) {   <p class="m-0">Enter Valid Email </p>}
         
        </div>
     }
        </div>
        <div class="my-2">
            <label for="password">Password</label>
            <input [ngClass]="{
                'is-valid': !registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty) ,
                'is-invalid': registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty) }"



             id="password" type="password" class="form-control" formControlName="password" >
            @if(registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty)){
                <div class="alert alert-danger w-50">
                    @if(registerForm.get('password')?.getError('required')){   <p class="m-0">password Is required</p>}
                 @else if (registerForm.get('password')?.getError('pattern')) {   <p class="m-0">must be at least 6 chars </p>}
                 
                </div>
            }
        
        </div>
        <div class="my-2"> 
            <label for="rePassword">Confirm Password</label>
            <input [ngClass]="{
                'is-valid': !registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty) ,
                'is-invalid': registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty) }"

            
            
            
            
            id="rePassword" type="password" class="form-control" formControlName="rePassword" >
          @if(registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty)){
            <p class="alert alert-danger m-0 w-50">Password confirmation is incorrect</p>
          }
        </div>
        <div class="my-2">
            <label for="phone">Phone</label>
            <input  [ngClass]="{
                'is-valid': !registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty) ,
                'is-invalid': registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty) }"


            id="phone" type="tel" class="form-control" formControlName="phone" >
            @if(registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty)){
                <div class="alert alert-danger w-50">
                    @if(registerForm.get('phone')?.getError('required')){   <p class="m-0">phone Is required</p>}
                 @else if (registerForm.get('phone')?.getError('pattern')) {   <p class="m-0">accept only egypt phone numbers </p>}
                 
                </div>
            }
        </div>
        <button type="submit" class="btn-main ms-auto d-block" [disabled]="registerForm.invalid || isLoading">Register
        @if(isLoading){
            <span><i class="fas fa-spin fa-spinner"></i></span>
        }
        </button>
        <!-- yb2a 3nd elbutton 3mlt disabled in html w kman fe el ts mn elmethod registerSubmit 34an eluser my3ml4 submit l ae 7aga
         3mlt kman  isLoading 34an twl mahwa by7ml el user myfdlsh ydos 3la elbutton w yb3t requests -->
        @if(msgError){
            <p class="alert alert-danger w-50 m-0">{{msgError}}</p>
        }
        <!-- b3ml elmsg ele htegii mn elbackend lw fe error -->
    </form>
</section>
