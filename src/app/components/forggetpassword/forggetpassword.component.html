<section>
    <h1 class="text-center text-main my-2">Forget Password</h1>

 @if (step===1) {
    <form [formGroup]="verifyEmail" class="bg-main-light rounded-4 shadow p-3" (ngSubmit)="setVerifyEmail()">
        <div class="my-3">
           <label for="email">email:</label>
           <input [ngClass]="{
            'is-valid': !verifyEmail.get('email')?.errors && (verifyEmail.get('email')?.touched || verifyEmail.get('email')?.dirty) ,
            'is-invalid': verifyEmail.get('email')?.errors && (verifyEmail.get('email')?.touched || verifyEmail.get('email')?.dirty) }"

           id="email"  type="email" class="form-control" formControlName="email">

           @if(verifyEmail.get('email')?.errors && (verifyEmail.get('email')?.touched||verifyEmail.get('email')?.dirty)){
            <div class="alert alert-danger w-50">
                @if(verifyEmail.get('email')?.getError('required')){   <p class="m-0">Email Is required</p>}
             @else if (verifyEmail.get('email')?.getError('email')) {   <p class="m-0">Enter Valid Email </p>}
             
            </div>
         }
        </div>
               <button class="btn-main" [disabled]="verifyEmail.invalid || isLoading">verify email
                @if(isLoading){
                    <span><i class="fas fa-spin fa-spinner"></i></span>
                }
               </button>
               @if(msgError){
                <p class="alert alert-danger w-50 m-0">{{msgError}}</p>
            }
           
           </form>
 }
 @else if (step===2) {  
     <form [formGroup]="verifyCode" class="bg-main-light rounded-4 shadow p-3" (ngSubmit)="setVerifyCode()">
    <div class="my-3">
       <label for="resetCode"> resetCode:</label>
       <input  [ngClass]="{
        'is-valid': !verifyCode.get('resetCode')?.errors && (verifyCode.get('resetCode')?.touched || verifyCode.get('resetCode')?.dirty) ,
        'is-invalid': verifyCode.get('resetCode')?.errors && (verifyCode.get('resetCode')?.touched || verifyCode.get('resetCode')?.dirty) }"
        id="resetCode"  type="text" class="form-control" formControlName="resetCode">
        @if(verifyCode.get('resetCode')?.errors && (verifyCode.get('email')?.touched||verifyCode.get('resetCode')?.dirty)){
            <div class="alert alert-danger w-50">
                @if(verifyCode.get('resetCode')?.getError('required')){   <p class="m-0">Enter code</p>}
                @else if (verifyCode.get('resetCode')?.getError('pattern')) {   <p class="m-0">Enter Valid Code </p>}
            </div>
         }

    </div>
           <button class="btn-main" [disabled]="verifyCode.invalid || isLoading" >verify code
            @if(isLoading){
                <span><i class="fas fa-spin fa-spinner"></i></span>
            }
           </button>
           @if(msgError){
            <p class="alert alert-danger w-50 m-0">{{msgError}}</p>
        }
        
        
       </form>
    }
     @else if(step===3){
        <form [formGroup]="resetPassword" class="bg-main-light rounded-4 shadow p-3" (ngSubmit)="setResetPassword()">
            <div class="my-3">
                <label for="email">email:</label>

                <input [ngClass]="{
                    'is-valid': !resetPassword.get('email')?.errors && (resetPassword.get('email')?.touched || resetPassword.get('email')?.dirty) ,
                    'is-invalid': resetPassword.get('email')?.errors && (resetPassword.get('email')?.touched || resetPassword.get('email')?.dirty) }"
                id="email" readonly  type="email" class="form-control" formControlName="email">

                
           @if(resetPassword.get('email')?.errors && (resetPassword.get('email')?.touched||resetPassword.get('email')?.dirty)){
            <div class="alert alert-danger w-50">
                @if(resetPassword.get('email')?.getError('required')){   <p class="m-0">Email Is required</p>}
             @else if (resetPassword.get('email')?.getError('email')) {   <p class="m-0">Enter Valid Email </p>}
             
            </div>
        }



             </div>
            <div class="my-3">
               <label for="newPassword">newPassword:</label>
               <input 
               [ngClass]="{
                'is-valid': !resetPassword.get('newPassword')?.errors && (resetPassword.get('newPassword')?.touched || resetPassword.get('newPassword')?.dirty) ,
                'is-invalid': resetPassword.get('newPassword')?.errors && (resetPassword.get('newPassword')?.touched || resetPassword.get('newPassword')?.dirty) }"

                id="newPassword"  type="password" class="form-control" formControlName="newPassword">
                @if(resetPassword.get('newPassword')?.errors && (resetPassword.get('newPassword')?.touched||resetPassword.get('newPassword')?.dirty)){
                    <div class="alert alert-danger w-50">
                        @if(resetPassword.get('newPassword')?.getError('required')){   <p class="m-0">newPassword Is required</p>}
                     @else if (resetPassword.get('newPassword')?.getError('newPassword')) {   <p class="m-0">Enter Valid newPassword </p>}
                     
                    </div>
                }
                

            </div>
                   <button class="btn-main" [disabled]="resetPassword.invalid || isLoading">verify New password
                    @if(isLoading){
                        <span><i class="fas fa-spin fa-spinner"></i></span>
                    }
                   </button>
                   @if(msgError){
                    <p class="alert alert-danger w-50 m-0">{{msgError}}</p>
                }
               </form>
     }
</section>
